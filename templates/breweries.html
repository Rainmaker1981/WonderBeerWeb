{% extends "base.html" %}
{% block content %}
<div class="card">
  <h2>Search Breweries</h2><p class="kicker">Exact name matches are prioritized, with partial and fuzzy matches next.</p>
  <form method="get">
    <div class="grid cols-3">
      <div><input type="text" name="q" data-suggest="brewery" value="{{ request.args.get('q','') }}" placeholder="Name, city, or state"></div>
      <div><select name="type">
        <option value="">Any Type</option>
        {% for t in types %}
          <option value="{{t}}" {% if request.args.get('type')==t %}selected{% endif %}>{{t}}</option>
        {% endfor %}
      </select></div>
      <div><button class="btn primary">Search</button></div>
    </div>
  </form>
</div>

<div class="card">
  <h3>Results ({{ items|length }})</h3>
  <table>
    <thead><tr><th>Name</th><th>Type</th><th>City</th><th>State</th><th>Action</th></tr></thead>
    <tbody>
      {% for b in items %}
        <tr>
          <td>{{ b.name }}</td>
          <td>{{ b.brewery_type }}</td>
          <td>{{ b.city }}</td>
          <td>{{ b.state }}</td>
          <td><a class="btn" href="{{ url_for('match', brewery_id=b.brewery_id) }}">See Menu & Match</a></td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
